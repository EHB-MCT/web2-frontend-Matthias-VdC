/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./script/search.js":
/*!**************************!*\
  !*** ./script/search.js ***!
  \**************************/
/***/ (() => {

eval("//Check if url is github or not\r\nlet github = false;\r\n//src: https://stackoverflow.com/questions/21265919/location-pathname-indexof-not-working-with-or\r\nif (location.pathname.indexOf(\"web2-frontend-Matthias-VdC\") != -1) {\r\n    github = true;\r\n}\r\n\r\ndocument.getElementById(\"header-search-form\").addEventListener(\"submit\", e => {\r\n    e.preventDefault();\r\n\r\n    sessionStorage.setItem(\"search\", document.getElementById(\"header-search-box\").value);\r\n    if (github == false) {\r\n        location.assign(`${location.origin}/docs/search.html`);\r\n    } else {\r\n        location.assign(`${location.origin}/web2-frontend-Matthias-VdC/search.html`);\r\n    }\r\n})\r\n\r\nif (location.pathname.indexOf(\"search.html\") != -1) {\r\n    document.getElementById(\"header-search-box\").value = sessionStorage.getItem(\"search\");\r\n\r\n    let searchBox = sessionStorage.getItem(\"search\");\r\n    //filter on store\r\n    let storeFilterId = document.getElementById(\"store-names\").value;\r\n    document.getElementById(\"store-names\").addEventListener(\"change\", e => {\r\n        e.preventDefault();\r\n        storeFilterId = document.getElementById(\"store-names\").value;\r\n        pageNumber = 1;\r\n        fetchSearch();\r\n    });\r\n    //filter by sorting\r\n    let sortFilterId = document.getElementById(\"sorter-names\").value;\r\n    document.getElementById(\"sorter-names\").addEventListener(\"change\", e => {\r\n        e.preventDefault();\r\n        sortFilterId = document.getElementById(\"sorter-names\").value;\r\n        pageNumber = 1;\r\n        fetchSearch();\r\n    });\r\n    //sort by minimum price\r\n    let minPriceFilter = document.getElementById(\"lower-price\").value;\r\n    document.getElementById(\"lower-price\").addEventListener(\"input\", e => {\r\n        e.preventDefault();\r\n        if (minPriceFilter >= maxPriceFilter) {\r\n            minPriceFilter = 0;\r\n            maxPriceFilter = 199;\r\n        }\r\n        minPriceFilter = document.getElementById(\"lower-price\").value;\r\n        pageNumber = 1;\r\n        fetchSearch();\r\n    });\r\n    //sort by maximum price\r\n    let maxPriceFilter = document.getElementById(\"max-price\").value;\r\n    document.getElementById(\"max-price\").addEventListener(\"input\", e => {\r\n        e.preventDefault();\r\n        if (minPriceFilter >= maxPriceFilter) {\r\n            minPriceFilter = 0;\r\n            maxPriceFilter = 199;\r\n        }\r\n        maxPriceFilter = document.getElementById(\"max-price\").value;\r\n        pageNumber = 1;\r\n        fetchSearch();\r\n    });\r\n\r\n    let pageNumber = 1;\r\n\r\n    function fetchSearch() {\r\n        // src:   https://stackoverflow.com/questions/4147112/how-to-jump-to-top-of-browser-page\r\n        scroll(0, 0)\r\n\r\n        fetch(`https://www.cheapshark.com/api/1.0/deals?sortBy=${sortFilterId}&title=${searchBox}&storeID=${storeFilterId}&pageSize=20&lowerPrice=${minPriceFilter}&upperPrice=${maxPriceFilter}&pageNumber=${pageNumber}`)\r\n            .then(response => {\r\n                return response.json();\r\n            })\r\n            .then(data => {\r\n                console.log(\"Search fetch!\", data);\r\n\r\n                //deletes previous html entries if you search again\r\n                document.getElementById(\"body-search-list\").innerHTML = ``\r\n\r\n                //CHANGE BODY TO SEARCH RESULTS\r\n                for (let k of data) {\r\n                    document.getElementById(\"body-search-list\").innerHTML +=\r\n                        `\r\n                    <div class=\"body-search-list-game\">\r\n                        <div class=\"body-search-list-game-container1\">\r\n                            <img class=\"body-search-list-game-thumb\" src=\"${k.thumb}\">\r\n                        </div>\r\n                        <div class=\"body-search-list-game-container2\">\r\n                            <p class=\"game-container-title\">${k.title}</p>\r\n                            <p class=\"game-container-savings\">-${Math.floor(k.savings)}%</p>\r\n                            <a href=\"#/\" id=\"${k.gameID}\" class=\"game-container-salePrice\">$ ${k.salePrice}</a>\r\n                        </div>\r\n                    </div>\r\n                    `;\r\n                }\r\n                for (let i = 0; i < data.length; i++) {\r\n                    document.getElementById(data[i].gameID).addEventListener(\"click\", e => {\r\n                        e.preventDefault();\r\n                        sessionStorage.setItem(\"game-id\", data[i].gameID);\r\n                        window.location.href = 'gamePage.html';\r\n                    })\r\n                }\r\n                if (pageNumber == 1) {\r\n                    document.getElementById(\"body-page-nav\").innerHTML = `\r\n                <p class=\"pageNumbers\" id=\"current\">${pageNumber}</p>\r\n                <p class=\"pageNumbers\" id=\"next1\">${pageNumber + 1}</p>\r\n                <p class=\"pageNumbers\" id=\"next2\">${pageNumber + 2}</p>\r\n                `\r\n                } else if (pageNumber >= 2) {\r\n                    document.getElementById(\"body-page-nav\").innerHTML = `\r\n                    <p class=\"pageNumbers\" id=\"previous1\">${pageNumber - 1}</p>\r\n                    <p class=\"pageNumbers\" id=\"current\">${pageNumber}</p>\r\n                    <p class=\"pageNumbers\" id=\"next1\">${pageNumber + 1}</p>\r\n                    `\r\n                }\r\n                if (document.getElementById(\"previous1\")) {\r\n                    document.getElementById(\"previous1\").addEventListener(\"click\", e => {\r\n                        e.preventDefault();\r\n                        pageNumber -= 1;\r\n                        fetchSearch();\r\n                    });\r\n                }\r\n                if (document.getElementById(\"next1\")) {\r\n                    document.getElementById(\"next1\").addEventListener(\"click\", e => {\r\n                        e.preventDefault();\r\n                        pageNumber += 1;\r\n                        fetchSearch();\r\n                    });\r\n                }\r\n                if (document.getElementById(\"next2\")) {\r\n                    document.getElementById(\"next2\").addEventListener(\"click\", e => {\r\n                        e.preventDefault();\r\n                        pageNumber += 2;\r\n                        fetchSearch();\r\n                    });\r\n                }\r\n            })\r\n    }\r\n    fetchSearch();\r\n}\n\n//# sourceURL=webpack://web2-frontend-matthias-vdc/./script/search.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./script/search.js"]();
/******/ 	
/******/ })()
;